# Gcodes Modifier

## Introduction

This project aims to allow users to create repetitive patterns of microstructures with 3D printers by modifying each layer's height.

Why do this ? 
As researchers, this allows us to study the wetting properties of such structures.

## How does it work

**Important:** Your 3D file must be **sliced with a layer height of 0.05mm**. Otherwise, the script may not work correctly, likely due to the slicer setting the flow rate parameters based on layer height.
Make sure that your file is a .gcode and **not a .bgcode**.


**Step 1:** 
Place your G-code file in the **same directory as the `zChanger` script**.

**Step 2:** 
Open the  `zChanger` script and locate the line `input_file = 'test.gcode'`. Replace 'test.gcode' with the name of your G-code file.

Next, locate `layer_height_pattern` and `layer_flow_pattern`. Insert the desired pattern as follows:

  - For layer height, **the unit is in mm**. Ensure it stays between 0.05mm and 0.32mm.
  - For flow rate, **use percentages**. Ensure it stays between 80% and 200%.

Before running the script, verify that the number of layers in the height pattern matches the flow rate pattern. The script will alert you if there is a mismatch.

**Step 3:** 
Scroll down to find the line `if __name__ == "__main__":`. Within this block, locate the line `write_new_code(output_file, code, True)`. Modify the third parameter:

  - Set to True to include flow rate modifications.
  - Set to False to modify only the layer height without changing the flow rate.
    
**Step 4:** 
Run the script. If successful, a message will be printed in the console, and the modified file will be saved in the same folder with the prefix "modified_".

**Step 5:** 
Copy the new file to your USB stick, insert it into the printer, and youâ€™re ready to go!

### Features not included 

The slicer slices the object for given dimensions. This program does not adjust the number of layers to match the original object's dimensions when layer heights are modified. For example, if a 1mm object is sliced with a 0.1mm layer height, it will have 10 layers. If the script changes the layer heights to a pattern of 0.1mm and 0.2mm, the expected dimension will become 1.5mm.

If your file comport supports, then, it might not work. I still didn't find why nor where to search in the gcode to make the supports compatible. **Please use only pieces without support**.

The script is compatible only with PrusaSlicer. A version compatible with Cura exists but has not been verified recently. The script may not work with other slicers due to differences in G-code formatting. These scripts were developed based on the G-code generated by Cura and PrusaSlicer for the printers at the University of Otago.

## Contributors
These scripts were created by Xavier Dartevel.


